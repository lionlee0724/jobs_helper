# 需求与功能规格说明书

## 1. 产品概述
本项旨在通过浏览器脚本（UserScript）实现“BOSS直聘”和“猎聘”两大招聘平台的求职流程自动化。目标是解决求职者在海量职位面前手动操作效率低下的问题，提供智能筛选、自动投递和统一管理的一站式解决方案。

## 2. 核心功能矩阵 (Function Matrix)

| 功能模块 | BOSS直聘 | 猎聘 | 说明 |
| :--- | :--- | :--- | :--- |
| **基础运行** | ✅ 支持 | ✅ 支持 | 脚本在页面加载时自动注入，提供统一的悬浮面板。 |
| **职位筛选** | ✅ 支持 | ✅ 支持 | 支持基于关键词（包含/排除）、公司规模、薪资范围进行即时过滤。 |
| **自动投递** | ✅ “立即沟通” | ✅ “立即沟通”/“申请” | BOSS为聊天模式，猎聘支持聊天或直接投递。 |
| **批量操作** | ✅ 支持 | ✅ 支持 | 自动翻页，连续处理列表中的职位。 |
| **状态记忆** | ✅ 支持 | ✅ 支持 | 记录已投递的职位和公司，避免重复投递。 |
| **日志系统** | ✅ 统一UI | ✅ 统一UI | 实时显示操作日志，支持导出为文本文件。 |
| **配置管理** | ✅ 统一UI | ✅ 统一UI | 在面板中直接修改延时、关键词等参数并持久化保存。 |

## 3. 详细功能需求

### 3.1 职位处理策略
- **去重机制**: 
    - 脚本必须记录已处理过的 `jobId` 或 `companyName`。
    - 重新运行或翻页遇到已处理职位时，应自动跳过。
    - 存储容量限制为最近 500-1000 条记录（可配置）。
- **人工模拟**:
    - 操作之间必须包含随机延时（默认 1000ms ± 20%）。
    - 避免机械式的固定频率点击，防止触发平台的反爬虫风控。

### 3.2 错误处理与恢复
- **网络异常**: 请求超时或失败时，应暂停并重试（最大重试 3 次）。
- **元素缺失**: 当页面结构变化导致找不到按钮时，应记录错误日志并跳过当前职位，而不是卡死脚本。
- **每日上限**: 达到平台每日投递上限（如 BOSS 的 100 次）时，应自动停止任务并通知用户。

### 3.3 用户界面 (UI)
- **悬浮面板**: 
    - 默认位置在屏幕右上角。
    - 支持最小化/展开。
    - 支持拖拽移动。
    - 包含“开始”、“停止”、“导出日志”等核心按钮。
- **状态反馈**: 
    - 按钮状态应随运行状态改变（如运行时“开始”变灰，“停止”变亮）。
    - 日志区域应区分颜色显示信息（INFO=蓝, SUCCESS=绿, ERROR=红, WARNING=橙）。

## 4. 非功能需求 (Non-Functional Requirements)

- **性能**: 脚本内存占用应保持稳定，避免因长时间运行导致浏览器卡顿（需定期清理 DOM 引用和日志缓冲区）。
- **兼容性**: 支持 Chrome 和 Edge 浏览器的最新版本，兼容 Tampermonkey 和 Violentmonkey 管理器。
- **安全性**: 仅请求必要的 `GM_` 权限，不上传用户 Cookie 或隐私数据到第三方服务器。

---
*文档版本: 2.0 (Merged from Feature Analysis & Checklist)*
